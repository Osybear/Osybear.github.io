<!doctype html>
<html>
	<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <meta name="author" content="Oswaldo Munoz-Bonifacio">
        <title>Osybear Games | Games</title>
        <link rel="stylesheet" href="./css/style.css">
        
        <style>
            /* Game Container */
            .game{
                margin-top: 25px;
                margin-bottom: 25px;
                background-size: cover;
                background-position: center center;
            }

            .game .container{
                height: 250px;
                display: flex;
                align-items: center;
                overflow-y: hidden;
            }

            .game .info{
                float: right;
                width: 50%;
                text-align: center;
                padding-left: 5px;
                padding-right: 5px;
            }

            .game img{
                float: left;
                width: 50%;
            }

            .game h2{
                margin-top: 0;
                position: relative;
            }
            
            .game h2 img{
                position: absolute;
                margin-left: auto;
                margin-right: auto;
                left: 250px;
                right: 0;
                width: 33px;
                cursor: pointer;
            }
            .info p {
                margin-bottom: 0;
            }
            
            /* Embeded Game */
            #gamecontainer {
                background-color: rgba(0,0,0,0.5);
                position:fixed;
                padding:0;
                margin:0;
                top:0;
                left:0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }

            #gamecontainer iframe{
                position: absolute;
                top:0;
                bottom: 0;
                left: 0;
                right: 0;
                margin: auto;
            }
            
            #gamecontainer div{
                position: absolute;
                height: 100px;
                width: auto;
                top:0;
                bottom: 0;
                left: 0;
                right: 0;
                margin: auto;
                background-color: white;
                text-align: center;
                vertical-align: middle;
                line-height: 100px; 
            }
        </style>
	</head>
    
	<body> 
        <header>
            <div class="container">
                <img src="images/logo.png" alt="Logo">          
                <h1>Osybear Games</h1>
                <h4>Making Imagination Reality</h4>
            </div>
        </header> 
        
        <nav>
            <div class="container">
                  <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="games.html">Games</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="https://twitter.com/OsybearGames"><img id="twitter" src="images/twitter.png"></a></li>
                    <li><a href=""><img id="patreon" src="images/patreon.png"></a></li>
                </ul>
            </div> 
        </nav>
        
        <section class="game">
            <div class="container">
                <img src="images/gamethumbnails/footergame.png" alt="thumbnail">
                <div class="info">
                    <h2><a href="">Footer Game</a> <a href="https://github.com/Osybear/Project-Footergame"><img src="images/download.ico"></a></h2>
                    <p>This game was made with the javascript library Phaser.js. It is a little dude that follows the cursor and can collect coins to increase the score counter. Works only in landscape mode if on mobile.</p>
                </div>
            </div>
        </section>
        
        <section class="game">
            <div class="container">
                <img src="images/gamethumbnails/demolition.png" alt="thumbnail">
                <div class="info">
                    <h2><a href="">Demolition</a> <a href="https://github.com/Osybear/Project-Demolition"><img src="images/download.ico"></a></h2>
                    <p>This game was made with the javascript library Phaser.js. It is a little dude that follows the cursor and can collect coins to increase the score counter. Works only in landscape mode if on mobile.</p>
                </div>
            </div>
        </section>
        
        <footer>
            <div class="container">
                <span>&copy;2018 BY OSYBEAR GAMES.</span>
            </div>
        </footer>
        
        <div id="gamecontainer">
            <iframe scrolling="no">
            </iframe>
            <div>Media Not Supported</div>
        </div>
	</body>
    
    <!-- Handle media change for game images -->
    <script>
        var mq = window.matchMedia("(max-width: 768px)");
        var arraygame = document.getElementsByClassName("game");

        var HandleMediaChange = function (mediaQueryList) {
            if (mediaQueryList.matches) {
                //set the background image src to the src of the img element in the section
                //then set the image element to display none
                for(var i = 0; i < arraygame.length; i++)
                {
                    arraygame.item(i).style.backgroundImage = "url('" + arraygame.item(i).getElementsByTagName('img')[0].getAttribute("src")+ "')";
                    arraygame.item(i).getElementsByTagName('img')[0].style.display = "none";
                }
            }
            else {
                //the opposite
                for(var i = 0; i < arraygame.length; i++)
                {
                    arraygame.item(i).style.backgroundImage = "none";
                    arraygame.item(i).getElementsByTagName('img')[0].style.display = "block";
                }
            }
        }

        mq.addListener(HandleMediaChange);
        HandleMediaChange(mq);
    </script>
    
    <!-- Handle the embeded game -->
    <script>
        //set display none at start
        var gamecontainer = document.getElementById('gamecontainer')
        var iframe = gamecontainer.getElementsByTagName('iframe')[0];
        var notsupported = gamecontainer.getElementsByTagName('div')[0];
        
        gamecontainer.style.display = "none"; 
        gamecontainer.onclick = function(){gamecontainer.style.display = "none"; iframe.src = null; iframe.width = 0; iframe.height = 0};
        
        var arrayinfo = document.getElementsByClassName("info");
        for(var i = 0; i < arrayinfo.length; i++)
        {
            var anchor = arrayinfo.item(i).getElementsByTagName('a')[0];
            anchor.onclick = function(){AnchorClick(anchor.innerHTML);return false};
        }
        
        function AnchorClick(gamename){
            if(gamename = "Footer Game"){       
                if(getWidth() >= 500){
                    iframe.src = "http://www.osybear.com/Project-Footergame/";
                    iframe.width = 500;
                    iframe.height = 100;
                    gamecontainer.style.display = "block";
                    notsupported.style.display = "none";
                    iframe.style.display = "block";
                }else{
                    gamecontainer.style.display = "block";
                    iframe.style.display = "none";
                    notsupported.style.display = "block";
                }
            }
            
            if(gamename = "Demolition"){       
                if(getWidth() >= 960){
                    iframe.src = "http://www.osybear.com/Game-Demolition/";
                    iframe.width = 960;
                    iframe.height = 600;
                    gamecontainer.style.display = "block";
                    notsupported.style.display = "none";
                    iframe.style.display = "block";
                }else{
                    gamecontainer.style.display = "block";
                    iframe.style.display = "none";
                    notsupported.style.display = "block";
                }
            }
        }
            
        function getWidth() {
          return Math.max(
            document.body.scrollWidth,
            document.documentElement.scrollWidth,
            document.body.offsetWidth,
            document.documentElement.offsetWidth,
            document.documentElement.clientWidth
          );
        }

    </script>
</html>
